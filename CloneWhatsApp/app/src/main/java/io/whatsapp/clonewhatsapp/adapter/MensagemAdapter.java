package io.whatsapp.clonewhatsapp.adapter;import android.content.Context;import android.support.annotation.NonNull;import android.support.annotation.Nullable;import android.view.LayoutInflater;import android.view.View;import android.view.ViewGroup;import android.widget.ArrayAdapter;import android.widget.TextView;import java.util.ArrayList;import java.util.List;import io.whatsapp.clonewhatsapp.R;import io.whatsapp.clonewhatsapp.helpers.Preferencias;import io.whatsapp.clonewhatsapp.model.Mensagem;/** * Created by rafaelcarvalho on 21/12/2017. */public class MensagemAdapter extends ArrayAdapter<Mensagem> {    private Context _context;    private ArrayList<Mensagem> mensagens;    public MensagemAdapter(@NonNull Context c, @NonNull ArrayList<Mensagem> objects) {        super(c, 0, objects);        this._context = c;        this.mensagens = objects;    }    @NonNull    @Override    public View getView(int position, @Nullable View convertView, @NonNull ViewGroup parent) {       View v = null;       if(v != null ){           LayoutInflater inflater = (LayoutInflater) _context.getSystemService( _context.LAYOUT_INFLATER_SERVICE );           //recuperar dados do usuario remetente           Preferencias preferencias = new Preferencias(_context);           String idUsuarioRemetente = preferencias.getIdentificador();           //recupendo a mensagem           Mensagem mensagem = mensagens.get( position );           //montando a view a partir do xml           if( idUsuarioRemetente.equals(mensagem.getUidUsuario())){               v = inflater.inflate(R.layout.item_mensagem_direita, parent, false);           }else{               v = inflater.inflate(R.layout.item_mensagem_esquerda, parent, false);           }           //recuperando o elemento para exibição           TextView textView = (TextView) v.findViewById(R.id.tv_mensagem);           textView.setText( mensagem.getMensagem() );       }       return v;    }}